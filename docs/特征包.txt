ä¸€ï¼šä¸ªæ¡ˆç®¡ç†æ¶æ„è®¾è®¡
- **ä¸ªæ¡ˆç®¡ç†** (å·²çŸ¥ç–¾ç—…): ç®¡ç†å·²ç¡®è®¤çš„æ£€ç–«ä¼ æŸ“ç—…ä¸ªæ¡ˆ â†’ å¯æ¨é€è‡³å®éªŒå®¤æ£€æµ‹ä¿¡æ¯ç®¡ç†æˆ–æµè°ƒç³»ç»Ÿ
---
### ç”¨ä¾‹å›¾-æ€»å›¾

```
@startuml
title æ–°å‘ä¼ æŸ“ç—…ç›‘æµ‹ç®¡ç†ç³»ç»Ÿ - ç”¨ä¾‹å›¾

rectangle "æ–°å‘ä¼ æŸ“ç—…ç›‘æµ‹ç®¡ç†ç³»ç»Ÿ" {

  ' ===== ä¸ªæ¡ˆç®¡ç†(å·²çŸ¥ç–¾ç—…) =====
  package "ä¸ªæ¡ˆç®¡ç†\n(å·²çŸ¥æ£€ç–«ä¼ æŸ“ç—…)" #LightGreen {
    usecase "UC04\nç®¡ç†ä¸ªæ¡ˆè°ƒæŸ¥è¡¨" as UC04
    usecase "UC05\nç®¡ç†éšè®¿ä¿¡æ¯" as UC05
    usecase "UC06\nç®¡ç†æ²»ç–—ä¿¡æ¯" as UC06
    usecase "UC07\nç®¡ç†ç—…ä¾‹æ£€æµ‹" as UC07
    usecase "UC08\nç®¡ç†ç—…ä¾‹è¿½è¸ª" as UC08
  }
}

' ===== ç–¾æ§ä¸šåŠ¡äººå‘˜å…³ç³» =====
User --> UC04

' ===== å¤–éƒ¨ç³»ç»Ÿäº¤äº’ =====
UC04 -right-> EpiSys : æ¨é€æµè°ƒ

' ===== ç”¨ä¾‹åŒ…å«å…³ç³»(è®¤è¯) =====
UC04 ..> UC19 : <<include>>
```

## ç”¨ä¾‹æ¸…å•

| ç”¨ä¾‹ç¼–å·                       | ç”¨ä¾‹åç§°             | ä¸»è¦å‚ä¸è€…              | å¤–éƒ¨ç³»ç»Ÿäº¤äº’          |
| ------------------------------ | -------------------- | ----------------------- | --------------------- |
| **ä¸ªæ¡ˆç®¡ç†(å·²çŸ¥ç–¾ç—…)**         |                      |                         |                       |
| UC04                           | ç®¡ç†ä¸ªæ¡ˆè°ƒæŸ¥è¡¨       | ç–¾æ§ä¸šåŠ¡äººå‘˜            | æµè°ƒç³»ç»Ÿ              |
---

#### Activity-1.2-ä¸ªæ¡ˆè°ƒæŸ¥è¡¨ç®¡ç†æµç¨‹ (UC04)

```
@startuml
title ä¸ªæ¡ˆè°ƒæŸ¥è¡¨ç®¡ç†æµç¨‹ï¼ˆUC04ï¼‰æ´»åŠ¨å›¾ v1.0

|ç–¾æ§ä¸šåŠ¡äººå‘˜|
start
:ç™»å½•ç³»ç»Ÿï¼ˆå•ç‚¹è®¤è¯ï¼‰;
:è¿›å…¥â€œä¸ªæ¡ˆç®¡ç†â€æ¨¡å—;
:é€‰æ‹©ç–¾ç—…ç±»å‹æˆ–ä¸ªæ¡ˆæ¥æº;
:ç‚¹å‡»â€œä¸ªæ¡ˆè°ƒæŸ¥è¡¨ç®¡ç†â€;

:æŸ¥çœ‹ä¸ªæ¡ˆåˆ—è¡¨;
if (æ˜¯å¦æ–°å¢ä¸ªæ¡ˆ?) then (æ˜¯)
  :ç‚¹å‡»â€œæ–°å¢ä¸ªæ¡ˆâ€;
  :å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ã€æŠ¥å‘Šå•ä½ã€ç—‡çŠ¶èµ·å§‹æ—¶é—´ç­‰ï¼‰;
  :å¡«å†™æµè¡Œç—…å­¦ä¿¡æ¯ï¼ˆæš´éœ²å²ã€æ¥è§¦å²ã€æ—…è¡Œå²ç­‰ï¼‰;
  :å¡«å†™åˆæ­¥è¯Šæ–­ä¿¡æ¯;
  :æäº¤ä¿å­˜è¯·æ±‚;
else (å¦)
  :é€‰æ‹©æ—¢æœ‰ä¸ªæ¡ˆ;
  if (æ˜¯å¦ç¼–è¾‘?) then (æ˜¯)
    :ä¿®æ”¹ä¸ªæ¡ˆè°ƒæŸ¥è¡¨ä¿¡æ¯;
    :æäº¤æ›´æ–°è¯·æ±‚;
  else (å¦)
    if (æ˜¯å¦åˆ é™¤?) then (æ˜¯)
      :ç¡®è®¤åˆ é™¤æ“ä½œ;
      :æäº¤åˆ é™¤è¯·æ±‚;
    else (å¦)
      :æŸ¥çœ‹ä¸ªæ¡ˆè¯¦ç»†ä¿¡æ¯;
    endif
  endif
endif

|ç³»ç»Ÿ|
:éªŒè¯ç”¨æˆ·æƒé™ï¼ˆinclude: å•ç‚¹ç™»å½•è®¤è¯ï¼‰;
:æ£€æŸ¥è¡¨å•æ•°æ®å®Œæ•´æ€§ä¸å¿…å¡«å­—æ®µ;
if (æ•°æ®æ ¡éªŒé€šè¿‡?) then (æ˜¯)
  :å†™å…¥æˆ–æ›´æ–°ä¸ªæ¡ˆæ•°æ®åº“è®°å½•;
  :ç”Ÿæˆä¸ªæ¡ˆç¼–å·;
  :è¿”å›æ“ä½œæˆåŠŸæ¶ˆæ¯;
else (å¦)
  :è¿”å›é”™è¯¯æç¤ºï¼ˆç¼ºå¤±å­—æ®µæˆ–æ ¼å¼é”™è¯¯ï¼‰;
endif

|ç–¾æ§ä¸šåŠ¡äººå‘˜|
:æŸ¥çœ‹æ“ä½œç»“æœæç¤º;

if (æ˜¯å¦éœ€è¦æ¨é€æµè°ƒç³»ç»Ÿ?) then (æ˜¯)
  |ç³»ç»Ÿ|
  :å°è£…ä¸ªæ¡ˆæ•°æ®åŒ…;
  :è°ƒç”¨â€œæµè°ƒç³»ç»Ÿâ€æ¥å£;
  |æµè°ƒç³»ç»Ÿ|
  :æ¥æ”¶å¹¶ç¡®è®¤ä¸ªæ¡ˆæ•°æ®;
  |ç³»ç»Ÿ|
  :è®°å½•æ¨é€çŠ¶æ€ä¸æ—¶é—´æˆ³;
  |ç–¾æ§ä¸šåŠ¡äººå‘˜|
  :æŸ¥çœ‹æ¨é€ç»“æœ;
endif

stop
@enduml
```

äºŒï¼šä¸ªæ¡ˆç®¡ç†ç”¨æˆ·æ•…äº‹
---
### ç”¨æˆ·æ•…äº‹æ€»ç»“è¡¨

| ç¼–å·   | ç”¨æˆ·æ•…äº‹                 | å…³è”ç”¨ä¾‹   | ä¼˜å…ˆçº§ | å¤æ‚åº¦ |
| ------ | ------------------------ | ---------- | ------ | ------ |
| US-4.1 | ç®¡ç†ä¸æ˜åŸå› ç—…ä¾‹         | UC09       | é«˜     | é«˜     |
| US-4.2 | å½•å…¥ä¸æ˜åŸå› ç—…ä¾‹æ£€æµ‹ä¿¡æ¯ | UC11       | é«˜     | ä¸­     |
| US-4.3 | æ¨é€ç¡®è¯Šç—…ä¾‹è‡³ä¸ªæ¡ˆç®¡ç†   | UC10       | é«˜     | é«˜     |
---

### ä¸æ˜åŸå› ç–¾ç—…ç®¡ç†æ¨¡å—ï¼ˆæ–°å‘ç–¾ç—…ï¼‰

#### US-4.1 ç®¡ç†ä¸æ˜åŸå› ç—…ä¾‹

**ç”¨æˆ·æ•…äº‹ï¼š**
ä½œä¸ºä¸€åç–¾æ§ä¸šåŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿç®¡ç†æœªçŸ¥ç—…åŸä½“çš„ä¸æ˜åŸå› ç—…ä¾‹ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°å’Œåº”å¯¹æ–°å‘ä¼ æŸ“ç—…ã€‚

**è§’è‰²ï¼š** ç–¾æ§ä¸šåŠ¡äººå‘˜

**å‰ç½®æ¡ä»¶ï¼š**

- ç”¨æˆ·å·²ç™»å½•
- å‘ç°ç–‘ä¼¼æ–°å‘ä¼ æŸ“ç—…ç—…ä¾‹

**è§¦å‘æ¡ä»¶ï¼š**

- æ‚£è€…ç—‡çŠ¶ä¸ç¬¦åˆå·²çŸ¥ç–¾ç—…
- å¸¸è§„æ£€æµ‹æ— æ³•ç¡®è¯Š
- å‡ºç°å¼‚å¸¸ä¸´åºŠè¡¨ç°

**é¢„æœŸç»“æœï¼š**

- åˆ›å»ºä¸æ˜åŸå› ç—…ä¾‹è®°å½•
- è®°å½•ä¸´åºŠç—‡çŠ¶å’Œç–‘ä¼¼ç—…åŸä½“
- å¯ä¸ŠæŠ¥åº”æ€¥å“åº”ç³»ç»Ÿå’Œæµè°ƒç³»ç»Ÿ

**éªŒæ”¶æ ‡å‡†ï¼š**

1. è‡ªåŠ¨ç”Ÿæˆä¸æ˜åŸå› ç—…ä¾‹ç¼–å·ï¼ˆunknownCaseNoï¼‰
2. å¿…å¡«å­—æ®µï¼šæ‚£è€…åŸºæœ¬ä¿¡æ¯ã€ç—‡çŠ¶èµ·å§‹æ—¥æœŸã€ä¸´åºŠç—‡çŠ¶
3. ç—…ä¾‹çŠ¶æ€ï¼šå¾…æ£€æµ‹/æ£€æµ‹ä¸­/å·²ç¡®è¯Š/æ’é™¤
4. è®°å½•ç–‘ä¼¼ç—…åŸä½“ä¿¡æ¯
5. æ”¯æŒä¸ŠæŠ¥åº”æ€¥æŒ‡æŒ¥ç³»ç»Ÿ
6. æ”¯æŒæ¨é€æµè°ƒç³»ç»Ÿ
7. ç¡®è¯Šåå¯è½¬å…¥ä¸ªæ¡ˆç®¡ç†ï¼ˆUC10ï¼‰

---

#### US-4.2 å½•å…¥ä¸æ˜åŸå› ç—…ä¾‹æ£€æµ‹ä¿¡æ¯

**ç”¨æˆ·æ•…äº‹ï¼š**
ä½œä¸ºä¸€åç–¾æ§ä¸šåŠ¡äººå‘˜ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå½•å…¥ä¸æ˜åŸå› ç—…ä¾‹çš„å®éªŒå®¤æ£€æµ‹ä¿¡æ¯ï¼Œä»¥ä¾¿ç¡®è®¤ç—…åŸä½“å’Œç–¾ç—…ç±»å‹ã€‚

**è§’è‰²ï¼š** ç–¾æ§ä¸šåŠ¡äººå‘˜

**å‰ç½®æ¡ä»¶ï¼š**

- ä¸æ˜åŸå› ç—…ä¾‹è®°å½•å·²å­˜åœ¨
- æ ·æœ¬å·²é€æ£€

**è§¦å‘æ¡ä»¶ï¼š**

- æ”¶åˆ°å®éªŒå®¤æ£€æµ‹ç»“æœ
- éœ€è¦è¡¥å……æ£€æµ‹ä¿¡æ¯

**é¢„æœŸç»“æœï¼š**

- è®°å½•æ£€æµ‹ä¿¡æ¯
- æ›´æ–°ç—…ä¾‹çŠ¶æ€
- ç¡®è¯Šåè§¦å‘ç—…ä¾‹æ¨é€æµç¨‹

**éªŒæ”¶æ ‡å‡†ï¼š**

1. å½“å‰ç‰ˆæœ¬æ”¯æŒæ‰‹å·¥å½•å…¥
2. é¢„ç•™å®éªŒå®¤ç³»ç»Ÿæ¥å£
3. æ£€æµ‹ç»“æœä¸º"é˜³æ€§"ä¸”ç¡®è®¤ç—…åŸä½“æ—¶ï¼Œæ›´æ–°çŠ¶æ€ä¸º"å·²ç¡®è¯Š"
4. æ£€æµ‹ç»“æœä¸º"é˜´æ€§"æ—¶ï¼Œå¯æ›´æ–°çŠ¶æ€ä¸º"æ’é™¤"
5. è®°å½•ç¡®è¯Šç–¾ç—…åç§°
6. è‡ªåŠ¨è§¦å‘æ•°æ®æ ¡éªŒï¼ˆæ£€æŸ¥é‡å¤ç—…ä¾‹ï¼‰

---

#### US-4.3 æ¨é€ç¡®è¯Šç—…ä¾‹è‡³ä¸ªæ¡ˆç®¡ç†

**ç”¨æˆ·æ•…äº‹ï¼š**
ä½œä¸ºä¸€åç–¾æ§ä¸šåŠ¡äººå‘˜ï¼Œå½“ä¸æ˜åŸå› ç—…ä¾‹ç¡®è¯Šåï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå°†å…¶æ¨é€è‡³ä¸ªæ¡ˆç®¡ç†æ¨¡å—ï¼Œä»¥ä¾¿è¿›è¡Œæ ‡å‡†åŒ–çš„ç—…ä¾‹ç®¡ç†ã€‚

**è§’è‰²ï¼š** ç–¾æ§ä¸šåŠ¡äººå‘˜

**å‰ç½®æ¡ä»¶ï¼š**

- ä¸æ˜åŸå› ç—…ä¾‹çŠ¶æ€ä¸º"å·²ç¡®è¯Š"
- å·²ç¡®è®¤ç—…åŸä½“å’Œç–¾ç—…ç±»å‹
- æ•°æ®æ ¡éªŒé€šè¿‡ï¼ˆæ— é‡å¤ç—…ä¾‹ï¼‰

**è§¦å‘æ¡ä»¶ï¼š**

- ç”¨æˆ·ç‚¹å‡»"ç—…ä¾‹æ¨é€"æŒ‰é’®

**é¢„æœŸç»“æœï¼š**

- è‡ªåŠ¨ç”Ÿæˆä¸ªæ¡ˆè®°å½•
- æ•°æ®ä»UnknownCaseæ˜ å°„åˆ°Case
- åŒæ­¥æ¨é€è‡³åº”æ€¥ç³»ç»Ÿå’Œæµè°ƒç³»ç»Ÿ
- æ›´æ–°ä¸æ˜åŸå› ç—…ä¾‹çŠ¶æ€ä¸º"å·²æ¨é€"

**éªŒæ”¶æ ‡å‡†ï¼š**

1. æ•°æ®æ˜ å°„å®Œæ•´ï¼ˆæ‚£è€…ä¿¡æ¯ã€æ£€æµ‹ç»“æœï¼‰
2. ä¸ªæ¡ˆæ¥æºæ ‡è¯†ä¸º"ä¸æ˜åŸå› è½¬å…¥"
3. ç”Ÿæˆæ–°çš„caseNo
4. å¤åˆ¶æ£€æµ‹è®°å½•åˆ°Caseå…³è”è¡¨
5. æ¨é€è‡³åº”æ€¥æŒ‡æŒ¥ç³»ç»ŸæˆåŠŸ
6. æ¨é€è‡³æµè°ƒç³»ç»ŸæˆåŠŸ
7. è®°å½•æ¨é€æ—¥å¿—
8. äº‹åŠ¡å®Œæ•´æ€§ï¼ˆå¤±è´¥æ—¶å›æ»šï¼‰

---

ä¸‰ï¼šä½ä¿çœŸåŸå‹
### WF-4.3 ä¸ªæ¡ˆè¯¦æƒ…é¡µ

#### çº¿æ¡†å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Logo] æ–°å‘ä¼ æŸ“ç—…ç›‘æµ‹ç®¡ç†ç³»ç»Ÿ                                           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ é¦–é¡µ | ä¸ªæ¡ˆç®¡ç† | ä¸æ˜åŸå› ç–¾ç—… | é¢„è­¦ç®¡ç† | ç»Ÿè®¡åˆ†æ | åŸºç¡€æ•°æ®         â”‚
â”‚                                              [æœç´¢æ¡†]  [ğŸ””3]  [ç”¨æˆ·â–¼]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             â”‚ é¦–é¡µ > ä¸ªæ¡ˆç®¡ç† > ä¸ªæ¡ˆåˆ—è¡¨ > ä¸ªæ¡ˆè¯¦æƒ… (CAS-2024-156)       â”‚
â”‚  ä¸ªæ¡ˆç®¡ç†    â”‚                                                           â”‚
â”‚  ä¸æ˜åŸå›     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  é¢„è­¦ç®¡ç†    â”‚ â”‚ ä¸ªæ¡ˆç¼–å·: CAS-2024-156        çŠ¶æ€: ğŸŸ¡ å¾…æ ¸å®         â”‚ â”‚
â”‚  ç»Ÿè®¡åˆ†æ    â”‚ â”‚ æ‚£è€…å§“å: å¼ ä¸‰                ç–¾ç—…: æ–°å† è‚ºç‚          â”‚ â”‚
â”‚  åŸºç¡€æ•°æ®    â”‚ â”‚ æŠ¥å‘Šæ—¥æœŸ: 2024-01-15          æŠ¥å‘Šäºº: æåŒ»ç”Ÿ          â”‚ â”‚
â”‚  ç³»ç»Ÿç®¡ç†    â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ [âœï¸ ç¼–è¾‘] [ğŸ“¤ æ¨é€æµè°ƒ] [ğŸ”’ ç»“æ¡ˆ] [è¿”å›åˆ—è¡¨]            â”‚ â”‚
â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                                                           â”‚
â”‚             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚ â”‚ [åŸºæœ¬ä¿¡æ¯] [æµè¡Œç—…å­¦] [éšè®¿è®°å½•] [æ²»ç–—è®°å½•]           â”‚ â”‚
â”‚             â”‚ â”‚ [æ£€æµ‹è®°å½•] [è¿½è¸ªè®°å½•] [æ“ä½œæ—¥å¿—]                      â”‚ â”‚
â”‚             â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ ã€åŸºæœ¬ä¿¡æ¯ã€‘ (P0)                                     â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ æ‚£è€…åŸºæœ¬ä¿¡æ¯                                          â”‚ â”‚
â”‚             â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚             â”‚ â”‚ å§“å: å¼ ä¸‰              æ€§åˆ«: ç”·       å¹´é¾„: 45å²     â”‚ â”‚
â”‚             â”‚ â”‚ èº«ä»½è¯å·: 110101197901011234                         â”‚ â”‚
â”‚             â”‚ â”‚ è”ç³»ç”µè¯: 138****5678                                â”‚ â”‚
â”‚             â”‚ â”‚ ç°ä½å€: åŒ—äº¬å¸‚æœé˜³åŒºXXè¡—é“XXå°åŒºXXå·æ¥¼XXå•å…ƒ          â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ æŠ¥å‘Šä¿¡æ¯                                              â”‚ â”‚
â”‚             â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚             â”‚ â”‚ æŠ¥å‘Šå•ä½: åŒ—äº¬å¸‚æœé˜³åŒºç–¾æ§ä¸­å¿ƒ                        â”‚ â”‚
â”‚             â”‚ â”‚ æŠ¥å‘Šäººå‘˜: æåŒ»ç”Ÿ                                      â”‚ â”‚
â”‚             â”‚ â”‚ æŠ¥å‘Šæ—¥æœŸ: 2024-01-15 14:30                           â”‚ â”‚
â”‚             â”‚ â”‚ ç—‡çŠ¶å¼€å§‹: 2024-01-10                                 â”‚ â”‚
â”‚             â”‚ â”‚ è¯Šæ–­æ—¥æœŸ: 2024-01-14                                 â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ è¯Šæ–­ä¿¡æ¯                                              â”‚ â”‚
â”‚             â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚             â”‚ â”‚ åˆæ­¥è¯Šæ–­: ç–‘ä¼¼æ–°å† è‚ºç‚                                â”‚ â”‚
â”‚             â”‚ â”‚ ç¡®è¯Šè¯Šæ–­: æ–°å† è‚ºç‚ï¼ˆå¾…æ ¸å®ï¼‰                          â”‚ â”‚
â”‚             â”‚ â”‚ ä¸ªæ¡ˆæ¥æº: ä¸»åŠ¨ç›‘æµ‹                                    â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚             â”‚                                                           â”‚
â”‚             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚ â”‚ ã€æµè¡Œç—…å­¦ä¿¡æ¯ã€‘ (P0)                                 â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ æš´éœ²å²                                                â”‚ â”‚
â”‚             â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚             â”‚ â”‚ è¿‘14å¤©å†…æœ‰ç–«åŒºæ—…å±…å²ï¼Œæ›¾å‰å¾€XXå¸‚XXåŒº                  â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ æ¥è§¦å²                                                â”‚ â”‚
â”‚             â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚             â”‚ â”‚ ä¸ç¡®è¯Šç—…ä¾‹æœ‰å¯†åˆ‡æ¥è§¦å²ï¼Œæ¥è§¦æ—¶é—´2024-01-08            â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ æ—…è¡Œå²                                                â”‚ â”‚
â”‚             â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚ â”‚
â”‚             â”‚ â”‚ 2024-01-01è‡³01-07æœŸé—´å‰å¾€XXçœXXå¸‚                    â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### éšè®¿è®°å½•Tab

```
â”‚             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚             â”‚ â”‚ [åŸºæœ¬ä¿¡æ¯] [æµè¡Œç—…å­¦] [éšè®¿è®°å½•] [æ²»ç–—è®°å½•]           â”‚ â”‚
â”‚             â”‚ â”‚ [æ£€æµ‹è®°å½•] [è¿½è¸ªè®°å½•] [æ“ä½œæ—¥å¿—]                      â”‚ â”‚
â”‚             â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ ã€éšè®¿è®°å½•ã€‘ (P1)              [â• æ–°å¢éšè®¿è®°å½•]      â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ğŸ“… 2024-01-15 | ç”µè¯éšè®¿ | æåŒ»ç”Ÿ              â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ å¥åº·çŠ¶æ€: å¥½è½¬                                 â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ä½“æ¸©: 36.8Â°C                                  â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ç—‡çŠ¶: å’³å—½å‡è½»ï¼Œæ— å‘çƒ­                         â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ æ²»ç–—ä¾ä»æ€§: è‰¯å¥½                               â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ä¸‹æ¬¡éšè®¿: 2024-01-18                          â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ å¤‡æ³¨: æ‚£è€…çŠ¶å†µè‰¯å¥½ï¼Œç»§ç»­å±…å®¶éš”ç¦»               â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚                              [æŸ¥çœ‹è¯¦æƒ…] [ç¼–è¾‘] â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ğŸ“… 2024-01-12 | ç°åœºéšè®¿ | ç‹æŠ¤å£«              â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ å¥åº·çŠ¶æ€: å¼‚å¸¸                                 â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ä½“æ¸©: 38.2Â°C                                  â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ç—‡çŠ¶: å‘çƒ­ã€å’³å—½ã€ä¹åŠ›                         â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ æ²»ç–—ä¾ä»æ€§: ä¸€èˆ¬                               â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ä¸‹æ¬¡éšè®¿: 2024-01-15                          â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚                              [æŸ¥çœ‹è¯¦æƒ…] [ç¼–è¾‘] â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ğŸ“… 2024-01-10 | ç”µè¯éšè®¿ | æåŒ»ç”Ÿ              â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â”‚ ... (æŠ˜å )                                     â”‚   â”‚ â”‚
â”‚             â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚             â”‚ â”‚                                                       â”‚ â”‚
â”‚             â”‚ â”‚                            [åŠ è½½æ›´å¤š...]              â”‚ â”‚
â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
```

#### é¡µé¢è¯´æ˜

**å¸ƒå±€ç»“æ„ï¼š**

- é¡¶éƒ¨ï¼šä¸ªæ¡ˆæ‘˜è¦ä¿¡æ¯ + ä¸»è¦æ“ä½œæŒ‰é’®
- Tabå¯¼èˆªï¼š7ä¸ªä¿¡æ¯ç±»åˆ«
- ä¸»åŒºï¼šå½“å‰Tabå†…å®¹
- åº•éƒ¨ï¼šæ—¶é—´çº¿è§†å›¾ï¼ˆå¯é€‰ï¼‰

**Tabå†…å®¹ç»„ç»‡ï¼š**

1. **åŸºæœ¬ä¿¡æ¯**ï¼šæ‚£è€…ä¿¡æ¯ã€æŠ¥å‘Šä¿¡æ¯ã€è¯Šæ–­ä¿¡æ¯
2. **æµè¡Œç—…å­¦ä¿¡æ¯**ï¼šæš´éœ²å²ã€æ¥è§¦å²ã€æ—…è¡Œå²
3. **éšè®¿è®°å½•**ï¼šæ—¶é—´çº¿å¡ç‰‡å±•ç¤º
4. **æ²»ç–—è®°å½•**ï¼šæ²»ç–—å†å²åˆ—è¡¨
5. **æ£€æµ‹è®°å½•**ï¼šæ£€æµ‹åˆ—è¡¨ + æ¨é€çŠ¶æ€
6. **è¿½è¸ªè®°å½•**ï¼šè¿½è¸ªåˆ—è¡¨ + åœ°å›¾å±•ç¤º
7. **æ“ä½œæ—¥å¿—**ï¼šå®¡è®¡æ—¥å¿—

**äº¤äº’è¯´æ˜ï¼š**

- Tabåˆ‡æ¢åŠ è½½å¯¹åº”å†…å®¹
- å¡ç‰‡å¼å±•ç¤ºæ”¯æŒå±•å¼€/æŠ˜å 
- æ¯ä¸ªå­è®°å½•å¯ç‹¬ç«‹ç¼–è¾‘
- æ”¯æŒåœ¨è¯¦æƒ…é¡µç›´æ¥æ–°å¢å­è®°å½•

---

å››ï¼šAPIå­—æ®µ
# API Contract 3 â€“ Case Details (WF-4.3)

## 1. Page Description
Displays a single confirmed disease case (Program: PrgCaseMgt1) with enrollment context and stage data. Tabs load: Basic Information (Program attributes + Stage 1: Investigation data elements), Epidemiology narrative (Stage 1 long text fields), Follow-up records (Stage 2 repeatable events), Treatment records (Stage 3 repeatable events), Test records (Stage 4 repeatable events), Tracking records (Stage 5 repeatable events), and Operation Logs (change logs). Page supports: edit case attributes, add/update repeatable stage events, push to epidemiology system flags, and close case (status changes via program rules/data element updates).

## 2. Required DHIS2 APIs

| #    | Endpoint                                         | Method | Description                                                  | Key Parameters                                               | Expected Response / Data Type               |
| ---- | ------------------------------------------------ | ------ | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------- |
| 1    | /api/programs/PrgCaseMgt1                        | GET    | Load program metadata, stages, and attributes to render tabs and forms | fields=id,name,trackedEntityType[id],programTrackedEntityAttributes[mandatory,trackedEntityAttribute[id,name,valueType,optionSet[id,name,options[id,code,name]]]],programStages[id,name,repeatable,programStageDataElements[dataElement[id,name,valueType,optionSet[id,name,options[id,code,name]]]]] | Program                                     |
| 2    | /api/optionSets/{id}                             | GET    | Resolve option sets for dropdowns (if not included by API-01 or for caching) | fields=id,name,options[id,code,name]                         | OptionSet                                   |
| 3    | /api/tracker/trackedEntities/{teiUid}            | GET    | Load TEI with enrollments and events for this program        | program=PrgCaseMgt1&fields=trackedEntity,trackedEntityType,orgUnit,attributes[attribute,value,displayName,valueType],enrollments[enrollment,program,status,orgUnit,enrolledAt,occurredAt,attributes[attribute,value],events[event,programStage,occurredAt,status,orgUnit,dataValues[dataElement,value]]] | TrackedEntity with nested Enrollment+Events |
| 4    | /api/tracker/enrollments/{enrollmentUid}         | GET    | Load single enrollment details when deep-linking or refreshing one tab | fields=*,!relationships,!events,!attributes                  | Enrollment                                  |
| 5    | /api/tracker/events                              | GET    | Load paginated repeatable events per stage tab (follow-up/treatment/test/tracking) | program=PrgCaseMgt1&enrollment={enrollmentUid}&programStage={stageUid}&order=occurredAt:desc&page={page}&pageSize={pageSize} | { pager, events[] }                         |
| 6    | /api/tracker/events/{eventUid}                   | GET    | Load a single event for edit form                            | fields=event,program,programStage,enrollment,orgUnit,occurredAt,status,dataValues[dataElement,value] | Event                                       |
| 7    | /api/tracker                                     | POST   | Create a new repeatable event (Stage 2/3/4/5)                | importStrategy=CREATE&atomicMode=OBJECT with payload events[] | Import summary                              |
| 8    | /api/tracker                                     | POST   | Update an eventâ€™s data values or status                      | importStrategy=UPDATE&atomicMode=OBJECT with payload events[] (include non-collection fields) | Import summary                              |
| 9    | /api/tracker                                     | POST   | Update TEI attributes in context of case (program attributes on TEI/enrollment as designed) | importStrategy=UPDATE&atomicMode=OBJECT with payload trackedEntities[] or enrollments[] attributes[] | Import summary                              |
| 10   | /api/tracker                                     | POST   | Mark push-to-epidemiology flags on Investigation stage event | importStrategy=UPDATE&atomicMode=OBJECT with payload events[] dataValues[dataElement=DePushEpi01,DePushEpiDt] | Import summary                              |
| 11   | /api/tracker                                     | POST   | Close case by setting Case Status in Stage 1 event (program rules may react) | importStrategy=UPDATE&atomicMode=OBJECT with payload events[] dataValues[dataElement=DeCaseStat1,value='CLOSED'] | Import summary                              |
| 12   | /api/tracker/events/{eventUid}/changeLogs        | GET    | Load audit trail for event fields/data values (Operations Log tab) | order=createdAt:desc                                         | { pager, changeLogs[] }                     |
| 13   | /api/tracker/trackedEntities/{teiUid}/changeLogs | GET    | Load audit trail for TEI attribute changes (Operations Log tab) | program=PrgCaseMgt1&order=createdAt:desc                     | { pager, changeLogs[] }                     |
| 14   | /api/tracker/events                              | GET    | Filtered fetch for specific status or date range per tab     | program=PrgCaseMgt1&enrollment={enrollmentUid}&programStage={stageUid}&occurredAfter={from}&occurredBefore={to}&status={status} | { pager, events[] }                         |
| 15   | /api/tracker/events/{eventUid}                   | GET    | Fetch latest single Investigation stage event to display epidemiology texts (exposure/contact/travel) | fields=event,occurredAt,dataValues[dataElement,value]        | Event                                       |

## 3. Notes
- Inter-API dependencies:
  - API-01 should be loaded once and cached; it defines stage UIDs: PsInvestig1 (Investigation), PsFollowUp1, PsTreatmnt1, PsTest00001, PsTracking1; and data elements including DeCaseStat1, DeExposHst1, DeContHst01, DeTravHst01, DePushEpi01, DePushEpiDt etc.
  - API-03 is the primary load for the page header and Basic/Epidemiology tabs; it returns TEI attributes (e.g., AtrCaseNo01, AtrFullNm01, AtrDiseaCd1, AtrRptDt001) and the enrollment with nested events for the program.
  - Tabs with many events (follow-up, treatment, test, tracking) should use API-05 with pagination rather than relying solely on nested events in API-03.
- Filtering/pagination:
  - For list tabs use page/pageSize and order=occurredAt:desc; set totalPages=true when rendering pagers.
  - For date filters per tab, use occurredAfter/occurredBefore; for status filters use status parameter.
- Update semantics (Tracker v2.41):
  - For updates via /api/tracker (API-08/09/10/11), include object non-collection fields (e.g., event, enrollment, orgUnit, programStage, occurredAt, status) even when only changing dataValues, per tracker importer requirements.
  - To update TEI attributes owned by TEI, use trackedEntities[]; to update program attributes owned by enrollment, use enrollments[] attributes[] with enrollment UID.
- Security and scopes:
  - Reading/updating requires access to Program PrgCaseMgt1 (accessLevel=PROTECTED) and ownership within user capture scope; otherwise use break-the-glass flow outside this page (not covered).
- Option sets:
  - Disease code options (OsDiseasCd1), Case Status (OsCaseStat1), and others are available through API-01; only call API-02 if lazy-loading or cache-miss.
- Status changes:
  - Case closure is effected by writing DeCaseStat1='CLOSED' on the Investigation stage event (API-11). Program rules may also update via other stages.

## 4. Example Request & Response

API-03: è·å–ä¸ªæ¡ˆè¯¦æƒ…ï¼ˆTEI+Enrollment+Eventsï¼‰

[è¯·æ±‚åœ°å€]
GET /api/tracker/trackedEntities/PQfMcpmXeFE?program=PrgCaseMgt1&fields=trackedEntity,trackedEntityType,orgUnit,attributes[attribute,value,displayName,valueType],enrollments[enrollment,program,status,orgUnit,enrolledAt,occurredAt,attributes[attribute,value],events[event,programStage,occurredAt,status,orgUnit,dataValues[dataElement,value]]]

[è¿”å›æ¶ˆæ¯ä½“]
{
  "trackedEntity": "PQfMcpmXeFE",
  "trackedEntityType": "TetPerson01",
  "orgUnit": "OuChengdu01",
  "attributes": [
    { "attribute": "AtrCaseNo01", "displayName": "ä¸ªæ¡ˆç¼–å·", "value": "CASE-20240115-0156" },
    { "attribute": "AtrFullNm01", "displayName": "å§“å", "value": "å¼ ä¸‰" },
    { "attribute": "AtrDiseaCd1", "displayName": "ç–¾ç—…ç¼–ç ", "value": "OptDiseaB30" },
    { "attribute": "AtrRptDt001", "displayName": "æŠ¥å‘Šæ—¥æœŸ", "value": "2024-01-15" }
  ],
  "enrollments": [
    {
      "enrollment": "MNWZ6hnuhSw",
      "program": "PrgCaseMgt1",
      "status": "ACTIVE",
      "orgUnit": "OuChengdu01",
      "enrolledAt": "2024-01-15T00:00:00.000",
      "events": [
        {
          "event": "evtInvestig01",
          "programStage": "PsInvestig1",
          "occurredAt": "2024-01-15T14:30:00.000",
          "status": "ACTIVE",
          "orgUnit": "OuChengdu01",
          "dataValues": [
            { "dataElement": "DeCaseStat1", "value": "VERIFIED" },
            { "dataElement": "DeExposHst1", "value": "è¿‘14å¤©å†…æœ‰ç–«åŒºæ—…å±…å²..." },
            { "dataElement": "DeContHst01", "value": "ä¸ç¡®è¯Šç—…ä¾‹æœ‰å¯†åˆ‡æ¥è§¦..." },
            { "dataElement": "DeTravHst01", "value": "1æœˆ1æ—¥è‡³1æœˆ7æ—¥å‰å¾€XXå¸‚..." },
            { "dataElement": "DePushEpi01", "value": "false" }
          ]
        }
      ]
    }
  ]
}

API-05: åˆ†é¡µè·å–éšè®¿è®°å½•ï¼ˆStage 2ï¼‰

[è¯·æ±‚åœ°å€]
GET /api/tracker/events?program=PrgCaseMgt1&enrollment=MNWZ6hnuhSw&programStage=PsFollowUp1&order=occurredAt:desc&page=1&pageSize=10&totalPages=true

[è¿”å›æ¶ˆæ¯ä½“]
{
  "pager": { "page": 1, "pageSize": 10, "total": 23, "pageCount": 3 },
  "events": [
    {
      "event": "evFlw001",
      "program": "PrgCaseMgt1",
      "programStage": "PsFollowUp1",
      "enrollment": "MNWZ6hnuhSw",
      "orgUnit": "OuChengdu01",
      "occurredAt": "2024-01-15T00:00:00.000",
      "status": "ACTIVE",
      "dataValues": [
        { "dataElement": "DeFlwUpMthd", "value": "PHONE" },
        { "dataElement": "DeHlthStat1", "value": "NORMAL" },
        { "dataElement": "DeTemp00001", "value": "36.8" },
        { "dataElement": "DeSymptoms1", "value": "å’³å—½å‡è½»ï¼Œæ— å‘çƒ­" },
        { "dataElement": "DeTrtCompl1", "value": "GOOD" },
        { "dataElement": "DeNxtFlwDt1", "value": "2024-01-18" }
      ]
    }
  ]
}

API-07: æ–°å¢æ£€æµ‹è®°å½•ï¼ˆStage 4ï¼‰

[è¯·æ±‚åœ°å€]
POST /api/tracker?importStrategy=CREATE&atomicMode=OBJECT
Content-Type: application/json

{
  "events": [
    {
      "program": "PrgCaseMgt1",
      "programStage": "PsTest00001",
      "enrollment": "MNWZ6hnuhSw",
      "orgUnit": "OuChengdu01",
      "status": "ACTIVE",
      "occurredAt": "2024-01-16T09:00:00.000",
      "dataValues": [
        { "dataElement": "DeTestNo001", "value": "TEST-20240116-0101" },
        { "dataElement": "DeSmplColDt", "value": "2024-01-15" },
        { "dataElement": "DeSmplType1", "value": "THROAT_SWAB" },
        { "dataElement": "DeTestType1", "value": "NAT" },
        { "dataElement": "DeTestRslt1", "value": "POSITIVE" },
        { "dataElement": "DeTestStat1", "value": "CONFIRMED" }
      ]
    }
  ]
}

[è¿”å›æ¶ˆæ¯ä½“]
{
  "status": "OK",
  "stats": { "created": 1, "updated": 0, "deleted": 0, "ignored": 0, "total": 1 },
  "bundleReport": {
    "typeReportMap": {
      "EVENT": {
        "stats": { "created": 1, "updated": 0, "deleted": 0, "ignored": 0, "total": 1 },
        "objectReports": [ { "trackerType": "EVENT", "uid": "evTest001", "errorReports": [] } ]
      }
    }
  }
}

API-10: æ ‡è®°æ¨é€è‡³æµè°ƒç³»ç»Ÿï¼ˆè°ƒæŸ¥é˜¶æ®µäº‹ä»¶ï¼‰

[è¯·æ±‚åœ°å€]
POST /api/tracker?importStrategy=UPDATE&atomicMode=OBJECT
Content-Type: application/json

{
  "events": [
    {
      "event": "evtInvestig01",
      "program": "PrgCaseMgt1",
      "programStage": "PsInvestig1",
      "enrollment": "MNWZ6hnuhSw",
      "orgUnit": "OuChengdu01",
      "status": "ACTIVE",
      "occurredAt": "2024-01-15T14:30:00.000",
      "dataValues": [
        { "dataElement": "DePushEpi01", "value": "true" },
        { "dataElement": "DePushEpiDt", "value": "2024-01-16T09:30:00.000" }
      ]
    }
  ]
}

[è¿”å›æ¶ˆæ¯ä½“]
{
  "status": "OK",
  "stats": { "created": 0, "updated": 1, "deleted": 0, "ignored": 0, "total": 1 }
}

API-11: ç»“æ¡ˆï¼ˆè®¾ç½®ä¸ªæ¡ˆçŠ¶æ€ä¸ºå·²å…³é—­ï¼‰

[è¯·æ±‚åœ°å€]
POST /api/tracker?importStrategy=UPDATE&atomicMode=OBJECT
Content-Type: application/json

{
  "events": [
    {
      "event": "evtInvestig01",
      "program": "PrgCaseMgt1",
      "programStage": "PsInvestig1",
      "enrollment": "MNWZ6hnuhSw",
      "orgUnit": "OuChengdu01",
      "status": "ACTIVE",
      "occurredAt": "2024-01-15T14:30:00.000",
      "dataValues": [
        { "dataElement": "DeCaseStat1", "value": "CLOSED" }
      ]
    }
  ]
}

[è¿”å›æ¶ˆæ¯ä½“]
{
  "status": "OK",
  "stats": { "created": 0, "updated": 1, "deleted": 0, "ignored": 0, "total": 1 }
}

API-12: è·å–äº‹ä»¶å˜æ›´æ—¥å¿—ï¼ˆæ“ä½œæ—¥å¿—Tabï¼‰

[è¯·æ±‚åœ°å€]
GET /api/tracker/events/evtInvestig01/changeLogs?order=createdAt:desc

[è¿”å›æ¶ˆæ¯ä½“]
{
  "pager": { "page": 1, "pageSize": 10 },
  "changeLogs": [
    {
      "createdBy": { "uid": "UserChgd001", "username": "chengdu_cdc_001" },
      "createdAt": "2024-01-16T09:30:10.000",
      "type": "UPDATE",
      "change": { "dataValue": { "dataElement": "DeCaseStat1", "previousValue": "VERIFIED", "currentValue": "CLOSED" } }
    }
  ]
}

API-09: æ›´æ–°ä¸ªæ¡ˆå±æ€§ï¼ˆå¦‚ç¡®è¯Šæ—¥æœŸ AtrDiagDt01ï¼‰

[è¯·æ±‚åœ°å€]
POST /api/tracker?importStrategy=UPDATE&atomicMode=OBJECT
Content-Type: application/json

{
  "enrollments": [
    {
      "enrollment": "MNWZ6hnuhSw",
      "program": "PrgCaseMgt1",
      "trackedEntity": "PQfMcpmXeFE",
      "orgUnit": "OuChengdu01",
      "status": "ACTIVE",
      "enrolledAt": "2024-01-15T00:00:00.000",
      "attributes": [
        { "attribute": "AtrDiagDt01", "value": "2024-01-14" }
      ]
    }
  ]
}

[è¿”å›æ¶ˆæ¯ä½“]
{
  "status": "OK",
  "stats": { "created": 0, "updated": 1, "deleted": 0, "ignored": 0, "total": 1 }
}
